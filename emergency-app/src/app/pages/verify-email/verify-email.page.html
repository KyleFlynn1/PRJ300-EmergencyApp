<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>Verify Email</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="verify-container">
    <div class="icon-section">
      <ion-icon name="mail-outline" size="large"></ion-icon>
    </div>

    <h1>Check Your Email</h1>
    <p>We sent a verification code to:</p>
    <p class="email-text">{{ email }}</p>

    <form (ngSubmit)="onVerify()">
      <!-- Verification Code Input -->
      <ion-item>
        <ion-label position="floating">Verification Code</ion-label>
        <ion-input
          type="text"
          [(ngModel)]="verificationCode"
          name="code"
          required
          maxlength="6"
          inputmode="numeric"
        ></ion-input>
      </ion-item>

      <!-- Error Message -->
      <ion-text color="danger" *ngIf="errorMessage">
        <p class="error-text">{{ errorMessage }}</p>
      </ion-text>

      <!-- Verify Button -->
      <ion-button
        expand="block"
        type="submit"
        [disabled]="isLoading"
        class="verify-button"
      >
        <ion-spinner name="crescent" *ngIf="isLoading"></ion-spinner>
        <span *ngIf="!isLoading">Verify Email</span>
      </ion-button>
    </form>

    <!-- Resend Code -->
    <div class="resend-section">
      <p>Didn't receive the code?</p>
      <ion-button
        fill="clear"
        (click)="onResendCode()"
        [disabled]="isResending"
      >
        <ion-spinner name="crescent" *ngIf="isResending"></ion-spinner>
        <span *ngIf="!isResending">Resend Code</span>
      </ion-button>
    </div>
  </div>
</ion-content>