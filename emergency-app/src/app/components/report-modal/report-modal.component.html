<div class="report-modal-container">
  <!-- Native Alert Overlay -->
  <div class="native-alert-overlay" *ngIf="showAlert" (click)="showAlert = false">
    <div class="native-alert-box" (click)="$event.stopPropagation()">
      <div class="alert-header">‚ö†Ô∏è Emergency Warning ‚ö†Ô∏è</div>
      <div class="alert-body">For real emergencies, call 999 instead of using the app.</div>
      <button class="alert-button" (click)="showAlert = false">Acknowledge</button>
    </div>
  </div>

  <div class="section report-form-section">
    <form [formGroup]="reportForm">
      
      <!-- Category Input -->
      <div class="form-group">
        <label>Category *</label>
        <select formControlName="category" class="native-select">
          <option value="">Select a category</option>
          <option *ngFor="let c of categoryOptions" [value]="c">{{c}}</option>
        </select>
        <div class="error-message" *ngIf="category?.invalid && category?.touched">
          Category is required
        </div>
      </div>

      <!-- Severity Input -->
      <div class="form-group">
        <label>Severity *</label>
        <select formControlName="severity" class="native-select">
          <option value="">Select severity</option>
          <option *ngFor="let s of severityOptions" [value]="s.value">{{s.label}}</option>
        </select>
        <div class="error-message" *ngIf="severity?.invalid && severity?.touched">
          Severity is required
        </div>
      </div>

      <!-- Additional Notes -->
      <div class="form-group">
        <label>Additional Notes</label>
        <textarea formControlName="notes" class="native-textarea" rows="5" placeholder="Describe the incident..."></textarea>
      </div>

      <!-- Display current location address -->
      <div class="form-group" *ngIf="userAddress && !overrideLocation?.value">
        <label>Detected Location</label>
        <div class="location-display">
          üìç {{ userAddress }}
        </div>
      </div>

      <!-- Override Location Checkbox -->
      <div class="form-group">
        <label class="checkbox-label">
          <input type="checkbox" formControlName="overrideLocation" class="native-checkbox" />
          Override Location
        </label>
      </div>

      <!-- Custom Address Input (shown only if override is checked) -->
      <div class="form-group" *ngIf="overrideLocation?.value">
        <label>Custom Address</label>
        <input 
          type="text" 
          formControlName="customAddress"
          class="native-select"
          placeholder="Enter custom address" />
      </div>

      <div class="form-actions">
        <button type="button" class="cancel-button" (click)="cancelReport()">
          Cancel
        </button>
        <button type="button" class="native-submit-button" (click)="submitReport()" [disabled]="reportForm.invalid">
          <ion-icon name="paper-plane"></ion-icon>
          Submit Report
        </button>
      </div>
    </form>
  </div>
</div>